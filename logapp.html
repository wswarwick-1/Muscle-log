<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Muscle Log</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  background:#2b2b2b;
  color:#f5f5f5;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  padding:16px;
}

h1 {
  text-align:center;
  color:#f2c94c;
  margin-bottom:16px;
}

h2 {
  text-align:center;
  color:#ddd;
  margin:12px 0;
}

button {
  width:100%;
  padding:14px;
  margin:6px 0;
  background:#3a3a3a;
  color:#f2c94c;
  border:1px solid #555;
  border-radius:10px;
  font-weight:600;
}

.exercise.active {
  background:#f2c94c;
  color:#000;
}

.card {
  background:#383838;
  border:1px solid #555;
  border-radius:12px;
  padding:14px;
  margin:10px 0;
}

input {
  width:100%;
  padding:12px;
  margin:6px 0;
  background:#444;
  color:#fff;
  border:1px solid #666;
  border-radius:10px;
}

.timer {
  font-size:32px;
  text-align:center;
  margin:10px 0;
  color:#f2c94c;
}

.log-entry {
  border-bottom:1px solid #555;
  padding:6px 0;
  font-size:14px;
}
</style>
</head>

<body>

<h1>Muscle Log</h1>

<button onclick="loadDay('A')">Day A – Heavy</button>
<button onclick="loadDay('B')">Day B – Volume</button>

<h2 id="dayTitle"></h2>

<div class="card" id="selected">No exercise selected</div>
<div class="card" id="setCounter">Set: 0</div>

<div id="exerciseList"></div>

<input id="weight" placeholder="Weight (kg)">
<input id="reps" placeholder="Reps">
<input id="rir" placeholder="RIR">

<button onclick="saveSet()">Save Set</button>

<div class="card">
  <h2>Rest Timer</h2>
  <div class="timer" id="timerDisplay">01:00</div>
  <button onclick="startTimer()">Start</button>
  <button onclick="resetTimer()">Reset</button>
</div>

<div class="card">
  <h2>Workout Log</h2>
  <div id="log"></div>
</div>

<script>
const workouts = {
  A:["Goblet Squat","RDL","Push-Ups","OHP","One-Arm Row","Pull-ups"],
  B:["Split Squat","DB RDL","DB Press","Lateral Raise","DB Row","Curl","Triceps"]
};

let currentExercise="";
let setCount=0;
let logs=JSON.parse(localStorage.getItem("logs")||"[]");

let timer=60;
let timerInterval=null;

function loadDay(day){
  document.getElementById("dayTitle").innerText =
    day==="A" ? "Day A – Heavy" : "Day B – Volume";

  const list=document.getElementById("exerciseList");
  list.innerHTML="";
  currentExercise="";
  setCount=0;
  document.getElementById("setCounter").innerText="Set: 0";
  document.getElementById("selected").innerText="No exercise selected";

  workouts[day].forEach(name=>{
    const b=document.createElement("button");
    b.innerText=name;
    b.className="exercise";
    b.onclick=()=>selectExercise(name,b);
    list.appendChild(b);
  });
}

function selectExercise(name,btn){
  document.querySelectorAll(".exercise").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  currentExercise=name;
  setCount=0;
  document.getElementById("setCounter").innerText="Set: 0";
  document.getElementById("selected").innerText="Selected: "+name;
}

function saveSet(){
  if(!currentExercise){
    alert("Select an exercise first");
    return;
  }
  setCount++;
  document.getElementById("setCounter").innerText="Set: "+setCount;

  logs.push({
    date:new Date().toLocaleString(),
    exercise:currentExercise,
    weight:weight.value,
    reps:reps.value,
    rir:rir.value
  });

  localStorage.setItem("logs",JSON.stringify(logs));
  renderLog();
}

function renderLog(){
  const log=document.getElementById("log");
  log.innerHTML="";
  logs.slice().reverse().forEach(e=>{
    log.innerHTML+=`
      <div class="log-entry">
        <strong>${e.exercise}</strong> — ${e.weight}kg × ${e.reps} (RIR ${e.rir})
      </div>`;
  });
}

function startTimer(){
  if(timerInterval) return;
  timer=60;
  updateTimer();
  timerInterval=setInterval(()=>{
    timer--;
    updateTimer();
    if(timer<=0){
      clearInterval(timerInterval);
      timerInterval=null;
      if(navigator.vibrate) navigator.vibrate([300,150,300]);
    }
  },1000);
}

function resetTimer(){
  clearInterval(timerInterval);
  timerInterval=null;
  timer=60;
  updateTimer();
}

function updateTimer(){
  const m=String(Math.floor(timer/60)).padStart(2,"0");
  const s=String(timer%60).padStart(2,"0");
  document.getElementById("timerDisplay").innerText=`${m}:${s}`;
}

/* AUTO-LOAD DAY A */
loadDay('A');
renderLog();
</script>

</body>
</html>
