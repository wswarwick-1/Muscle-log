<script>
const logs = JSON.parse(localStorage.getItem("logs")) || [];
const box = document.getElementById("logBox");

/*
Structure:
date
  workout
    sets
*/

const grouped = {};

logs.forEach(l => {
  if (!grouped[l.date]) grouped[l.date] = {};
  if (!grouped[l.date][l.workout]) grouped[l.date][l.workout] = [];
  grouped[l.date][l.workout].push(l);
});

// Render newest days first
Object.keys(grouped).reverse().forEach(date => {
  const dayCard = document.createElement("div");
  dayCard.className = "card";

  let html = `<div class="highlight">${date}</div>`;

  Object.keys(grouped[date]).forEach(workout => {
    html += `<div style="margin-top:10px;font-weight:600;color:#f2c94c;">${workout}</div>`;

    grouped[date][workout].forEach(l => {
      html += `<div class="small">• ${l.exercise} — ${l.weight}kg × ${l.reps}</div>`;
    });
  });

  dayCard.innerHTML = html;
  box.appendChild(dayCard);
});
</script>
