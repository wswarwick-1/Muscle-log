<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Muscle Log</title>

<style>
body {
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:#2f2f2f;
  color:#f5f5f5;
}
header {
  background:#1f1f1f;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
a { color:#f2c94c; text-decoration:none; }

h1 {
  text-align:center;
  color:#f2c94c;
  margin:14px 0;
}

.container {
  max-width:520px;
  margin:auto;
  padding:12px;
}

.card {
  background:#3a3a3a;
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
}

button {
  width:100%;
  padding:14px;
  border-radius:16px;
  border:none;
  background:#444;
  color:#f2c94c;
  font-size:16px;
  margin-top:8px;
}

.exercise {
  padding:10px;
  margin-top:6px;
  border-radius:12px;
  background:#2b2b2b;
}
.exercise.active {
  background:#f2c94c;
  color:#000;
}

input, select {
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:14px;
  border:none;
  background:#2b2b2b;
  color:#fff;
  font-size:15px;
}

.small { font-size:13px; opacity:.85; }
.highlight { color:#f2c94c; font-weight:600; }
.center { text-align:center; }
</style>
</head>

<body>

<header>
  <div>Muscle Log</div>
  <a href="log.html">Log</a>
</header>

<h1>Muscle Log</h1>

<div class="container">

<!-- STATUS -->
<div class="card">
  <div class="highlight">Current Exercise</div>
  <div id="currentExercise">None</div>
  <div class="small">PR: <span id="prDisplay">—</span></div>
  <div class="small">Last time: <span id="lastTime">—</span></div>
  <div class="small">Set: <span id="setCount">0</span></div>
</div>

<!-- WORKOUT SELECT -->
<div class="card">
  <div class="highlight">Workout</div>
  <select id="workoutSelect"></select>
  <div id="exerciseList"></div>
</div>

<!-- LOG SET -->
<div class="card">
  <div class="highlight">Log Set</div>
  <input id="weight" type="number" placeholder="Weight (kg)">
  <input id="reps" type="number" placeholder="Reps">
  <button id="saveSetBtn">Save Set</button>
</div>

<!-- REST TIMER -->
<div class="card center">
  <div class="highlight">Rest Timer</div>
  <input id="restInput" type="number" value="90">
  <div id="timer" style="font-size:28px;margin:10px 0;">00:00</div>
  <button id="startTimerBtn">Start</button>
  <button id="resetTimerBtn">Reset</button>
</div>

<!-- BUILD WORKOUT -->
<div class="card">
  <div class="highlight">Build Workout</div>
  <input id="newWorkoutName" placeholder="Workout name">
  <input id="newExerciseName" placeholder="Add exercise">
  <button id="addExerciseBtn">Add Exercise</button>
  <div id="builderPreview" class="small"></div>
  <button id="saveWorkoutBtn">Save Workout</button>
</div>

</div>

<!-- BEEP -->
<audio id="beep" preload="auto">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA=" type="audio/wav">
</audio>

<script>
/* ---------------- DATA ---------------- */
const DEFAULT_WORKOUTS = {
  "Upper Body": ["Bench Press","Row","OHP","Pull-ups","Triceps"],
  "Lower Body": ["Squat","RDL","Leg Press","Hamstring Curl","Calves"]
};

let workouts = JSON.parse(localStorage.getItem("workouts"));
if (!workouts) {
  workouts = DEFAULT_WORKOUTS;
  localStorage.setItem("workouts", JSON.stringify(workouts));
}

let logs = JSON.parse(localStorage.getItem("logs")) || [];
let prs = JSON.parse(localStorage.getItem("prs")) || {};

let currentWorkout = null;
let currentExercise = null;
let setCount = 0;
let builderBuffer = [];

/* ---------------- ELEMENTS ---------------- */
const workoutSelect = document.getElementById("workoutSelect");
const exerciseList = document.getElementById("exerciseList");
const currentExerciseEl = document.getElementById("currentExercise");
const prDisplay = document.getElementById("prDisplay");
const lastTimeEl = document.getElementById("lastTime");
const setCountEl = document.getElementById("setCount");

/* ---------------- INIT ---------------- */
function init() {
  workoutSelect.innerHTML = "";
  Object.keys(workouts).forEach(name => {
    const o = document.createElement("option");
    o.value = name;
    o.innerText = name;
    workoutSelect.appendChild(o);
  });
  loadWorkout();
}
init();

/* ---------------- WORKOUT ----------------
