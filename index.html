<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Muscle Log</title>

<style>
body {
  background:#2b2b2b;
  color:#f5f5f5;
  font-family:Arial, sans-serif;
  padding:16px;
}
h1 { text-align:center; color:#f2c94c; }

button {
  width:100%;
  padding:14px;
  margin:6px 0;
  background:#3a3a3a;
  color:#f2c94c;
  border:1px solid #555;
  border-radius:10px;
}

.exercise.active {
  background:#f2c94c;
  color:#000;
}

.card {
  background:#383838;
  border:1px solid #555;
  border-radius:12px;
  padding:14px;
  margin:10px 0;
}

input {
  width:100%;
  padding:12px;
  margin:6px 0;
  background:#444;
  color:#fff;
  border:1px solid #666;
  border-radius:10px;
}

.timer {
  font-size:32px;
  text-align:center;
  color:#f2c94c;
}

.log {
  font-size:14px;
  border-bottom:1px solid #555;
  padding:4px 0;
}

.small {
  font-size:13px;
  opacity:0.8;
}
</style>
</head>

<body>

<h1>Muscle Log</h1>

<button id="dayA">Day A – Heavy</button>
<button id="dayB">Day B – Volume</button>

<div class="card" id="status">No exercise selected</div>
<div class="card" id="sets">Set: 0</div>

<button id="changeExercise">Change Exercise</button>

<div class="card">
  <div class="small">Custom exercise</div>
  <input id="customExercise" placeholder="Type any exercise">
  <button id="useCustom">Use this exercise</button>
</div>

<div id="exerciseList"></div>

<input id="weight" placeholder="Weight (kg)">
<input id="reps" placeholder="Reps">
<input id="rir" placeholder="RIR">

<button id="saveSet">Save Set</button>

<div class="card">
  <h2>Rest Timer</h2>
  <div class="small">Rest time (seconds)</div>
  <input id="restInput" type="number" value="60">
  <div class="timer" id="timer">01:00</div>
  <button id="startTimer">Start</button>
  <button id="resetTimer">Reset</button>
</div>

<div class="card">
  <h2>Log</h2>
  <div id="log"></div>
</div>

<script>
/* ELEMENTS */
const statusDiv = document.getElementById("status");
const setsDiv = document.getElementById("sets");
const exerciseList = document.getElementById("exerciseList");
const logDiv = document.getElementById("log");

const customInput = document.getElementById("customExercise");
const restInput = document.getElementById("restInput");
const timerDisplay = document.getElementById("timer");

const weightInput = document.getElementById("weight");
const repsInput = document.getElementById("reps");
const rirInput = document.getElementById("rir");

/* DATA */
const workouts = {
  A:["Goblet Squat","RDL","Push-Ups","OHP","Row","Pull-ups"],
  B:["Split Squat","DB RDL","DB Press","Lateral Raise","Curl","Triceps"]
};

let currentDay = "A";
let currentExercise = "";
let setCount = 0;
let timer = 60;
let interval = null;
let logs = JSON.parse(localStorage.getItem("logs") || "[]");

/* LOAD DAY */
function loadDay(day){
  currentDay = day;
  exerciseList.innerHTML = "";
  currentExercise = "";
  setCount = 0;
  setsDiv.innerText = "Set: 0";
  statusDiv.innerText = "No exercise selected";

  workouts[day].forEach(name=>{
    const btn = document.createElement("button");
    btn.innerText = name;
    btn.className = "exercise";
    btn.onclick = () => selectExercise(name, btn);
    exerciseList.appendChild(btn);
  });
}

/* SELECT EXERCISE */
function selectExercise(name, btn){
  document.querySelectorAll(".exercise").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  currentExercise = name;
  setCount = 0;
  setsDiv.innerText = "Set: 0";
  statusDiv.innerText = "Selected: " + name;
}

/* CUSTOM EXERCISE */
function useCustomExercise(){
  const name = customInput.value.trim();
  if(!name) return alert("Enter exercise name");

  document.querySelectorAll(".exercise").forEach(b=>b.classList.remove("active"));
  currentExercise = name;
  setCount = 0;
  setsDiv.innerText = "Set: 0";
  statusDiv.innerText = "Selected: " + name;
  customInput.value = "";
}

/* CHANGE EXERCISE */
function changeExercise(){
  loadDay(currentDay);
}

/* SAVE SET */
function saveSet(){
  if(!currentExercise) return alert("Select an exercise first");

  setCount++;
  setsDiv.innerText = "Set: " + setCount;

  logs.push({
    date:new Date().toISOString().split("T")[0],
    day:currentDay,
    exercise:currentExercise,
    weight:weightInput.value,
    reps:repsInput.value,
    rir:rirInput.value
  });

  localStorage.setItem("logs", JSON.stringify(logs));
  drawLog();
}

/* DRAW LOG */
function drawLog(){
  logDiv.innerHTML = "";
  logs.slice().reverse().forEach(e=>{
    logDiv.innerHTML += `<div class="log">${e.day} – ${e.exercise} — ${e.weight}kg × ${e.reps}</div>`;
  });
}

/* TIMER */
function startTimer(){
  if(interval) return;
  timer = parseInt(restInput.value) || 60;
  updateTimer();

  interval = setInterval(()=>{
    timer--;
    updateTimer();
    if(timer <= 0){
      clearInterval(interval);
      interval = null;
      if(navigator.vibrate) navigator.vibrate([300,150,300]);
    }
  },1000);
}

function resetTimer(){
  clearInterval(interval);
  interval = null;
  timer = parseInt(restInput.value) || 60;
  updateTimer();
}

function updateTimer(){
  timerDisplay.innerText = "00:" + String(timer).padStart(2,"0");
}

/* BUTTON WIRING */
document.getElementById("dayA").onclick = () => loadDay("A");
document.getElementById("dayB").onclick = () => loadDay("B");
document.getElementById("useCustom").onclick = useCustomExercise;
document.getElementById("changeExercise").onclick = changeExercise;
document.getElementById("saveSet").onclick = saveSet;
document.getElementById("startTimer").onclick = startTimer;
document.getElementById("resetTimer").onclick = resetTimer;

/* INIT */
loadDay("A");
drawLog();
updateTimer();
</script>

</body>
</html>
