<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Training Log</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#1c1c1c;
  --card:#2a2a2a;
  --accent:#f2c94c;
  --text:#f5f5f5;
  --muted:#9a9a9a;
}

*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
}

header{
  padding:16px;
  font-size:22px;
  font-weight:700;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

header span{
  color:var(--accent);
  cursor:pointer;
}

.container{
  padding:16px;
  max-width:520px;
  margin:auto;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
}

label{
  color:var(--accent);
  font-weight:600;
  display:block;
  margin-bottom:6px;
}

select,input,button{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  background:#1f1f1f;
  color:var(--text);
  font-size:16px;
}

input::placeholder{color:var(--muted)}

button{
  background:var(--accent);
  color:#000;
  font-weight:700;
  margin-top:10px;
  cursor:pointer;
}

.small{
  color:var(--muted);
  font-size:14px;
  margin-top:6px;
}

.list-item{
  padding:10px;
  border-bottom:1px solid #3a3a3a;
}

.badge{
  display:inline-block;
  background:var(--accent);
  color:#000;
  padding:3px 8px;
  border-radius:8px;
  font-size:12px;
  font-weight:700;
  margin-left:6px;
}
</style>
</head>

<body>

<header>
  Training Log
  <span onclick="toggleLog()">Log</span>
</header>

<div class="container" id="mainView">

  <div class="card">
    <label>Workout</label>
    <select id="workoutSelect"></select>
    <button onclick="addPowerlifting()">Add Powerlifting Program</button>
  </div>

  <div class="card">
    <label>Exercise</label>
    <select id="exerciseSelect"></select>
    <input id="customExercise" placeholder="Type any exercise">
    <button onclick="useCustomExercise()">Use custom exercise</button>

    <div class="small">
      Current: <span id="current">—</span><br>
      PR: <span id="pr">—</span><br>
      Last: <span id="last">—</span>
    </div>
  </div>

  <div class="card">
    <label>Log Set</label>
    <input id="weight" type="number" placeholder="Weight (kg)">
    <input id="reps" type="number" placeholder="Reps">
    <button onclick="saveSet()">Save Set</button>
  </div>

  <div class="card">
    <label>Create Custom Workout</label>
    <input id="newWorkoutName" placeholder="Workout name">
    <input id="newExercise" placeholder="Exercise name">
    <button onclick="addExercise()">Add Exercise</button>
    <div id="builderList" class="small"></div>
    <button onclick="saveCustomWorkout()">Save Workout</button>
  </div>

</div>

<div class="container" id="logView" style="display:none"></div>

<script>
const DEFAULT_WORKOUTS = {
  Push:["Bench Press","Overhead Press","Incline DB Press","Lateral Raise","Tricep Pushdown"],
  Pull:["Deadlift","Barbell Row","Lat Pulldown","Face Pull","Bicep Curl"],
  Legs:["Back Squat","Leg Press","Hamstring Curl","Calf Raise"]
};

const POWERLIFTING = {
  "Powerlifting – Squat":["Back Squat","Paused Squat","Leg Press","Hamstring Curl"],
  "Powerlifting – Bench":["Bench Press","Paused Bench","Incline DB Press","Tricep Pushdown"],
  "Powerlifting – Deadlift":["Deadlift","Paused Deadlift","Barbell Row","Lat Pulldown"]
};

let workouts = JSON.parse(localStorage.getItem("workouts"));
if(!workouts){
  workouts = DEFAULT_WORKOUTS;
  localStorage.setItem("workouts",JSON.stringify(workouts));
}

let logs = JSON.parse(localStorage.getItem("logs")) || [];
let prs = JSON.parse(localStorage.getItem("prs")) || {};

let currentExercise = null;
let builder = [];

const workoutSelect = document.getElementById("workoutSelect");
const exerciseSelect = document.getElementById("exerciseSelect");

function init(){
  workoutSelect.innerHTML="";
  Object.keys(workouts).forEach(w=>{
    const o=document.createElement("option");
    o.textContent=w;
    workoutSelect.appendChild(o);
  });
  loadExercises();
}
init();

function loadExercises(){
  exerciseSelect.innerHTML="";
  workouts[workoutSelect.value].forEach(e=>{
    const o=document.createElement("option");
    o.textContent=e;
    exerciseSelect.appendChild(o);
  });
  selectExercise();
}

function selectExercise(){
  currentExercise = exerciseSelect.value;
  updateStats();
}

function useCustomExercise(){
  const ex=document.getElementById("customExercise").value.trim();
  if(!ex)return;
  currentExercise=ex;
  updateStats();
}

function updateStats(){
  document.getElementById("current").innerText=currentExercise||"—";
  document.getElementById("pr").innerText=prs[currentExercise]
    ? `${prs[currentExercise].weight}kg x ${prs[currentExercise].reps}`
    :"—";

  const last=logs.slice().reverse().find(l=>l.exercise===currentExercise);
  document.getElementById("last").innerText=last
    ? `${last.weight}kg x ${last.reps}`
    :"—";
}

function saveSet(){
  const w=+weight.value;
  const r=+reps.value;
  if(!currentExercise||!w||!r)return;

  logs.push({
    date:new Date().toISOString().split("T")[0],
    workout:workoutSelect.value,
    exercise:currentExercise,
    weight:w,
    reps:r
  });

  localStorage.setItem("logs",JSON.stringify(logs));

  if(!prs[currentExercise]||w>prs[currentExercise].weight){
    prs[currentExercise]={weight:w,reps:r};
    localStorage.setItem("prs",JSON.stringify(prs));
  }

  weight.value=reps.value="";
  updateStats();
}

function toggleLog(){
  mainView.style.display = mainView.style.display==="none"?"block":"none";
  logView.style.display = logView.style.display==="none"?"block":"none";
  renderLog();
}

function renderLog(){
  logView.innerHTML = "";

  if(logs.length === 0){
    logView.innerHTML = "<div class='card'>No logs yet</div>";
    return;
  }

  const grouped = {};

  // Group by workout
  logs.slice().reverse().forEach(l=>{
    if(!grouped[l.workout]) grouped[l.workout] = [];
    grouped[l.workout].push(l);
  });

  Object.keys(grouped).forEach(workoutName=>{

    const card = document.createElement("div");
    card.className = "card";

    let html = `<label>${workoutName}</label>`;

    grouped[workoutName].forEach(l=>{
      html += `
        <div class="list-item">
          <strong>${l.exercise}</strong><br>
          ${l.weight}kg x ${l.reps}
        </div>
      `;
    });

    card.innerHTML = html;
    logView.appendChild(card);
  });
}

function addExercise(){
  const ex=newExercise.value.trim();
  if(!ex)return;
  builder.push(ex);
  newExercise.value="";
  builderList.innerHTML=builder.map((e,i)=>`${i+1}. ${e}`).join("<br>");
}

function saveCustomWorkout(){
  const name=newWorkoutName.value.trim();
  if(!name||builder.length===0)return;
  workouts[name]=[...builder];
  localStorage.setItem("workouts",JSON.stringify(workouts));
  builder=[];
  builderList.innerHTML="";
  newWorkoutName.value="";
  init();
}

function addPowerlifting(){
  Object.keys(POWERLIFTING).forEach(k=>{
    if(!workouts[k])workouts[k]=POWERLIFTING[k];
  });
  localStorage.setItem("workouts",JSON.stringify(workouts));
  init();
  alert("Powerlifting program added");
}

workoutSelect.onchange=loadExercises;
exerciseSelect.onchange=selectExercise;
</script>

</body>
</html>


